# ============================================
# Video Compression API - Environment Configuration
# ============================================
# Copy this file to .env.local (development) or .env (production)
# For Docker deployment, set these in docker-compose.yml or .env file

# ============================================
# REQUIRED - API Security
# ============================================
# Generate a secure API key: openssl rand -hex 32
# Used in X-API-Key header for all API requests
API_KEY=your_64_character_hex_api_key_here

# Admin dashboard password
ADMIN_PASSWORD=your_secure_admin_password

# Allowed origins for CORS (comma-separated, or * for all)
ALLOWED_ORIGINS=*

# ============================================
# REQUIRED - Server Configuration
# ============================================
# Base URL of the API server (for generating video URLs)
# Example: https://v.ogtemplate.com
BASE_URL=https://v.ogtemplate.com

# Debug mode (true/false)
DEBUG=false

# ============================================
# REQUIRED - Redis Configuration
# ============================================
# Redis is REQUIRED for job queue management (BullMQ)
# For Docker: use service name (redis)
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0

# ============================================
# FFmpeg Configuration
# ============================================
# Path to FFmpeg binary (defaults to 'ffmpeg' if in PATH)
FFMPEG_PATH=ffmpeg

# FFmpeg operation timeout in seconds
FFMPEG_TIMEOUT=600

# ============================================
# Video Processing
# ============================================
# HLS segment duration in seconds
# Recommended: 2 for short videos (10-20 seconds) for faster playback on slow connections
# Use 4-6 for longer videos
HLS_TIME=2

# Maximum video age in days before cleanup
MAX_VIDEO_AGE_DAYS=30

# Whether to delete original files after processing
CLEANUP_ORIGINAL=true

# Enable parallel compression (false = sequential processing)
PARALLEL_COMPRESSION=false

# Number of concurrent compression jobs (only if PARALLEL_COMPRESSION=true)
PARALLEL_LIMIT=1

# ============================================
# Thumbnail Processing
# ============================================
# WebP quality for thumbnails (0-100)
# Recommended: 30 for high compression with acceptable quality
# Lower = smaller files, higher = better quality
THUMBNAIL_QUALITY=30

# Maximum thumbnail dimensions in pixels
# Thumbnails are resized to fit within these dimensions while maintaining aspect ratio
THUMBNAIL_MAX_WIDTH=480
THUMBNAIL_MAX_HEIGHT=480

# ============================================
# Storage Paths
# ============================================
# Directory for video uploads (from WordPress)
# Docker: /media/uploads
# Local: ./public/media/uploads
MEDIA_UPLOADS_DIR=./public/media/uploads

# Directory for processed content (HLS, compressed files)
# Docker: /media/content
# Local: ./public/media/content
MEDIA_CONTENT_DIR=./public/media/content

# Log file location
LOG_FILE=./logs/all.log

# ============================================
# WordPress Integration
# ============================================
# REQUIRED: Webhook URL for progress updates
# Example: https://your-wordpress-site.com/wp-json/cvp/v1/webhook
WORDPRESS_WEBHOOK_URL=

# Allowed domains for video downloads (comma-separated, or * for all)
ALLOWED_DOWNLOAD_DOMAINS=*

# Verify SSL certificates when downloading videos
VERIFY_SSL_DOWNLOADS=true
